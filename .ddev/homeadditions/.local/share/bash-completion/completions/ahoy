#!/bin/bash
#ddev-generated
# @see https://ahoy-cli.readthedocs.io/en/latest/#bash-zsh-completion

: ${PROG:=$(basename ${BASH_SOURCE})}

_cli_bash_autocomplete() {
     local cur opts
     COMPREPLY=()
     cur="${COMP_WORDS[COMP_CWORD]}"
     opts=$( ${COMP_WORDS[@]:0:$COMP_CWORD} --generate-bash-completion )

     # Only show ahoy options/subcommands, never files
     COMPREPLY=( $(compgen -W "${opts}" -- "$cur") )

     # If no ahoy options match and we're past the first subcommand, allow files
     if [[ ${#COMPREPLY[@]} -eq 0 && $COMP_CWORD -gt 2 ]]; then
         COMPREPLY=( $(compgen -f -- "$cur") )
     fi

     return 0
 }

complete -o nosort -F _cli_bash_autocomplete $PROG
